---
title: Integrate Effect Tracing with OpenTelemetry
id: observability-opentelemetry
skillLevel: advanced
useCase: observability
summary: >-
  Connect Effect's tracing spans to OpenTelemetry for end-to-end distributed
  tracing and visualization.
tags:
  - tracing
  - opentelemetry
  - observability
  - effect
  - distributed-tracing
rule:
  description: >-
    Integrate Effect.withSpan with OpenTelemetry to export traces and visualize
    request flows across services.
related:
  - observability-tracing-spans
  - observability-structured-logging
author: PaulJPhilp
---

# Integrate Effect Tracing with OpenTelemetry

## Guideline

Connect Effect's tracing spans to OpenTelemetry to enable distributed tracing, visualization, and correlation across your entire stack.

## Rationale

OpenTelemetry is the industry standard for distributed tracing.  
By integrating Effect's spans with OpenTelemetry, you gain deep visibility into request flows, performance bottlenecks, and dependenciesâ€”across all your services and infrastructure.

## Good Example

```typescript
import { Effect } from "effect";
// Pseudocode: Replace with actual OpenTelemetry integration for your stack
import { trace, context, SpanStatusCode } from "@opentelemetry/api";

// Wrap an Effect.withSpan to export to OpenTelemetry
function withOtelSpan<T>(name: string, effect: Effect.Effect<unknown, T, unknown>) {
  return Effect.gen(function* () {
    const otelSpan = trace.getTracer("default").startSpan(name);
    try {
      const result = yield* effect;
      otelSpan.setStatus({ code: SpanStatusCode.OK });
      return result;
    } catch (err) {
      otelSpan.setStatus({ code: SpanStatusCode.ERROR, message: String(err) });
      throw err;
    } finally {
      otelSpan.end();
    }
  });
}

// Usage
const program = withOtelSpan("fetchUser", Effect.sync(() => {
  // ...fetch user logic
  return { id: 1, name: "Alice" };
}));
```

**Explanation:**  
- Start an OpenTelemetry span when entering an Effectful operation.
- Set status and attributes as needed.
- End the span when the operation completes or fails.
- This enables full distributed tracing and visualization in your observability platform.

## Anti-Pattern

Using Effect.withSpan without exporting to OpenTelemetry, or lacking distributed tracing, which limits your ability to diagnose and visualize complex request flows.
